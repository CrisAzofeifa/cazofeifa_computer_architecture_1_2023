<!doctype html>
<head>
<meta charset="utf-8">
<title>textcon</title>
<link rel="stylesheet" href="simics.css">
<script>function postUrl() {
    window.parent.postMessage({ content_url: window.location.href }, "*");
}
if (window.parent != null && window.parent != window) {
    postUrl();
    window.addEventListener("hashchange", function () {
        postUrl();
    });
} else {
    // Check if we are part of a Simics doc site and redirect if we are
    fetch("../simics-doc-site-marker", { method: "HEAD" }).then(response => {
        if (response.ok) {
            window.location = "..#" + window.location.href;
        } else {
            console.info("Not part of a Simics documentation site");
        }
    }).catch(error => {
        console.warn("Failed to check if this is a Simics documentation site:",
            error);
    });
}</script>
</head>
<div class="chain">
<a href="rm-class-text_panel_frontend.html">text_panel_frontend</a>
<a href="rm-class-time-server.html">time-server</a>
</div>
<div class="path">
<a href="index.html">Simics Reference Manual</a>
&nbsp;/&nbsp;
<a href="rm-classes.html">5 Classes</a>
&nbsp;/&nbsp;</div>
<h1 id="textcon"><a href="#textcon">textcon</a></h1>
<section class="doc-item not-numbered not-in-toc">
<h3 id="description">
<a href="#description">Description</a>
</h3>
The <tt>textcon</tt> class provides a text user interface to a simulated machine. The console is typically connected to a simulated serial device.
<h3 id="interfaces-implemented">
<a href="#interfaces-implemented">Interfaces Implemented</a>
</h3>conf_object, log_object, serial_device, serial_console_frontend, recorded, con_input, text_console_backend, telnet_connection, telnet_connection_v2, external_connection_events, host_serial, break_strings, break_strings_v2
<h3 id="port-objects">
<a href="#port-objects">Port Objects</a>
</h3>
<dl>
<dt id="dt:tcp">tcp</dt>
<dd>
<a href="rm-class-tcp-server.html#tcp-server">tcp-server</a>
 – Telnet TCP server</dd>
<dt id="dt:unix_socket">unix_socket</dt>
<dd>
<a href="rm-class-unix-socket-server.html#unix-socket-server">unix-socket-server</a>
 – Telnet Unix domain socket server</dd>
</dl>
<h3 id="commands-for-this-class">
<a href="#commands-for-this-class">Commands for this class</a>
</h3>
<ul>
<li>
<a href="rm-cmd-textcon.break.html">break</a>
 – <i>deprecated</i> set a string to break on</li>
<li>
<a href="rm-cmd-textcon.capture-start.html">capture-start</a>
 – capture output to file</li>
<li>
<a href="rm-cmd-textcon.capture-stop.html">capture-stop</a>
 – stop output capture to file</li>
<li>
<a href="rm-cmd-textcon.enable-cmd-line-output.html">disable-cmd-line-output</a>
 – disable output to Simics command line</li>
<li>
<a href="rm-cmd-textcon.enable-cmd-line-output.html">enable-cmd-line-output</a>
 – enable output to Simics command line</li>
<li>
<a href="rm-cmd-textcon.hide.html">hide</a>
 – hide the console window</li>
<li>
<a href="rm-cmd-textcon.host-serial-setup.html">host-serial-setup</a>
 – setup host serial connection</li>
<li>
<a href="rm-cmd-textcon.info.html">info</a>
 – print information about the object</li>
<li>
<a href="rm-cmd-textcon.input.html">input</a>
 – send input to a console</li>
<li>
<a href="rm-cmd-textcon.input-file.html">input-file</a>
 – input a file into a console</li>
<li>
<a href="rm-cmd-textcon.list-break-strings.html">list-break-strings</a>
 – <i>deprecated</i> list all active string breakpoints</li>
<li>
<a href="rm-cmd-textcon.record-start.html">record-start</a>
 – start recording of output on the console</li>
<li>
<a href="rm-cmd-textcon.record-stop.html">record-stop</a>
 – stop recording of output on the console</li>
<li>
<a href="rm-cmd-textcon.save-to-file.html">save-to-file</a>
 – save console screen to file</li>
<li>
<a href="rm-cmd-textcon.show.html">show</a>
 – display the console window</li>
<li>
<a href="rm-cmd-textcon.status.html">status</a>
 – print status of the object</li>
<li>
<a href="rm-cmd-textcon.telnet-setup.html">telnet-setup</a>
 – setup telnet connection</li>
<li>
<a href="rm-cmd-textcon.telnet-status.html">telnet-status</a>
 – return telnet connection data</li>
<li>
<a href="rm-cmd-textcon.unbreak.html">unbreak</a>
 – <i>deprecated</i> stop breaking on string</li>
<li>
<a href="rm-cmd-textcon.wait-for-string.html">wait-for-string</a>
 – <i>deprecated</i> wait for a string in a script branch</li>
<li>
<a href="rm-cmd-textcon.wait-then-write.html">wait-then-write</a>
 – <i>deprecated</i> wait for a string, then write an input string</li>
</ul>
<h3 id="commands-for-interface-break_strings_v2">
<a href="#commands-for-interface-break_strings_v2">Commands for interface break_strings_v2</a>
</h3>
<ul>
<li>
<a href="rm-cmd-break_strings_v2.bp-break-console-string.html">bp-break-console-string</a>
 – set string breakpoint</li>
<li>
<a href="rm-cmd-break_strings_v2.bp-run-until-console-string.html">bp-run-until-console-string</a>
 – run until string appears</li>
<li>
<a href="rm-cmd-break_strings_v2.bp-trace-console-string.html">bp-trace-console-string</a>
 – enable tracing of string appearances</li>
<li>
<a href="rm-cmd-break_strings_v2.bp-wait-for-console-string.html">bp-wait-for-console-string</a>
 – wait for specified string</li>
</ul>
<h3 id="attributes">
<a href="#attributes">Attributes</a>
</h3>
<dl>
<dt id="dt:device">
<i>device</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>o|n</code>
<br>The serial device that the console is attached to, must implement the 'serial_device' interface.</dd>
<dt id="dt:serial_frontends">
<i>serial_frontends</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[o*]</code>
<br>Serial frontends connected to the console. These must implement the serial_console_frontend interface and will receive all output to the console.</dd>
<dt id="dt:pending_input">
<i>pending_input</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>d</code>
<br>Queued input waiting to be sent to the attached device.</dd>
<dt id="dt:output_file">
<i>output_file</i>
</dt>
<dd>
<b>Pseudo</b> attribute; 
<b>read/write</b> access; type: 
<code>s</code>
<br>If set to a non-empty string, output will be directed to and appended to this file. Set to an empty string to stop file output.</dd>
<dt id="dt:cmd_line_output">
<i>cmd_line_output</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>b</code>
<br>If set to TRUE, the Simics command line will receive console output, which will also be logged at level 3. Command line and log output will also happen automatically when the console is started in invisible mode, until it is explicitly displayed, or until this flag is set to FALSE.</dd>
<dt id="dt:output_line">
<i>output_line</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>s</code>
<br>The current output line of printable characters from the attached device.</dd>
<dt id="dt:log_line">
<i>log_line</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>s</code>
<br>The current pending log output line.</dd>
<dt id="dt:convert_crlf">
<i>convert_crlf</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>b</code>
<br>If TRUE, LF characters received from the attached device are converted to CRLF.</dd>
<dt id="dt:filter_esc">
<i>filter_esc</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[bbbb]</code>
<br>Determines if ANSI escape sequences sent from the attached device will be filtered out in different circumstances: [for breakpoint matching, for command line, for log output, elsewhere]. The default is [TRUE, TRUE, FALSE, FALSE].</dd>
<dt id="dt:esc_state">
<i>esc_state</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[[bbs][bbs][bbs][bbs]]</code>
<br>ANSI escape sequence parser state.</dd>
<dt id="dt:recorder">
<i>recorder</i>
</dt>
<dd>
<b>Required</b> attribute; 
<b>read/write</b> access; type: 
<code>o</code>
<br>Associated recorder object. Used for recording console input.</dd>
<dt id="dt:output_recording">
<i>output_recording</i>
</dt>
<dd>
<b>Pseudo</b> attribute; 
<b>read/write</b> access; type: 
<code>b</code>
<br>When enabled, all characters written to the console will be recorded. The record can be read from the attribute <i>recorded_output</i>.</dd>
<dt id="dt:recorded_output">
<i>recorded_output</i>
</dt>
<dd>
<b>Pseudo</b> attribute; 
<b>read/write</b> access; type: 
<code>s</code>
<br>The characters that have been recorded when the attribute <i>output_recording</i> is <i>TRUE</i>. Note that the recorded string will NOT be cleared when <i>output_recording</i> is reset.</dd>
<dt id="dt:window_title">
<i>window_title</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>s</code>
<br>Console GUI window title.</dd>
<dt id="dt:screen_size">
<i>screen_size</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[ii]</code>
<br>Console visible screen size (columns, rows).</dd>
<dt id="dt:max_scrollback_size">
<i>max_scrollback_size</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>i</code>
<br>Maximum number of scrollback lines. Set to 0 for no maximum. Default is 10000.</dd>
<dt id="dt:screen_data">
<i>screen_data</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[[i*][[iii]*][[ib]*]]</code>
<br>Console screen contents (characters, attributes, line_info). Characters and attributes lists have length width * height. Attributes list contains (attribute, fg colour, bg colour) for every screen character. line_info is a list with meta data for every line: (line length, line wrap).</dd>
<dt id="dt:scrollback_data">
<i>scrollback_data</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[ddd[[ib]*]]</code>
<br>Console scrollback contents (characters, attributes, colours, line_info). line_info has the same format as for the <tt>screen_data</tt> attribute. The character data also has the same format but is given as binary for faster checkpointing. The attribute data is a list of text_console_attrib_t.attrib values for each scrollback character, and the colour data is a list of text_console_colour_t values, alternating foreground and background colours (hence the colour data is 4 times long as the character data).</dd>
<dt id="dt:default_colours">
<i>default_colours</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[ii]</code>
<br>Default text colours (foreground, background) in 0xRRGGBB format.</dd>
<dt id="dt:visible">
<i>visible</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>b|n</code>
<br>Show/hide console GUI window. Setting to NIL only has effect before instantiation, in which case it leads to the default visibility behaviour of showing the console window if it is the unique console in the configuration.</dd>
<dt id="dt:cursor_data">
<i>cursor_data</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[iibb]</code>
<br>Current cursor data (column, row, pending wrap, relative coordinates).</dd>
<dt id="dt:saved_cursor_data">
<i>saved_cursor_data</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[iibb]</code>
<br>Saved cursor data (column, row, pending wrap, relative coordinates).</dd>
<dt id="dt:decawm">
<i>DECAWM</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>b</code>
<br>Auto-wrap mode.</dd>
<dt id="dt:scrolling_region">
<i>scrolling_region</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[ii]</code>
<br>Scrolling region line numbers (top, bottom), 0-based.</dd>
<dt id="dt:text_attributes">
<i>text_attributes</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[iiib]</code>
<br>Current text attributes (attribute, fg col, bg col, reverse).</dd>
<dt id="dt:modes">
<i>modes</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[bbb]</code>
<br>Current terminal modes (cursor, keypad, insert).</dd>
<dt id="dt:tab_stops">
<i>tab_stops</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[i*]</code>
<br>Current tab stop positions (1-based).</dd>
<dt id="dt:parser_state">
<i>parser_state</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[ib[i*]]</code>
<br>VT parser state</dd>
<dt id="dt:backspace_sends_del">
<i>backspace_sends_del</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>b</code>
<br>If TRUE, the backspace key sends DEL (127), otherwise BS (8). Default is TRUE.</dd>
<dt id="dt:input_mode">
<i>input_mode</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>s</code>
<br>What terminal type to emulate for keyboard inputs. Possible values are <tt>"standard"</tt> (VT220/XTerm), which is the default, and <tt>"microsoft"</tt> (Microsoft's "VT100+").</dd>
<dt id="dt:telnet_unix_socket">
<i>telnet_unix_socket</i>
</dt>
<dd>
<b>Pseudo</b> attribute; 
<b>read/write</b> access; type: 
<code>s|n</code>
<br>Filename of UNIX socket used by the telnet console server.</dd>
<dt id="dt:buffer_until_telnet_connection">
<i>buffer_until_telnet_connection</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>b</code>
<br>If TRUE, the console will buffer any output until a client connects. If FALSE, such output will be discarded.</dd>
<dt id="dt:telnet_output_buffer">
<i>telnet_output_buffer</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>[i*]</code>
<br>Characters transmitted by the simulated serial port, but not yet written out by the console.</dd>
<dt id="dt:telnet_raw">
<i>telnet_raw</i>
</dt>
<dd>
<b>Optional</b> attribute; 
<b>read/write</b> access; type: 
<code>b</code>
<br>If TRUE, will not interpret telnet control codes or otherwise change the bytes transmitted in either direction.</dd>
<dt id="dt:pty">
<i>pty</i>
</dt>
<dd>
<b>Pseudo</b> attribute; 
<b>read-only</b> access; type: 
<code>s|n</code>
<br>Name of the allocated host serial device, or NIL.</dd>
<dt id="dt:break_strings">
<i>break_strings</i>
</dt>
<dd>
<b>Pseudo</b> attribute; 
<b>read-only</b> access; type: 
<code>[[sbbiib]*]</code>
<br>List of console break strings (string, active, oneshot, hap ID, unused, regexp)</dd>
</dl>
<h3 id="provided-by">
<a href="#provided-by">Provided By</a>
</h3>
<a href="mod.textcon.html">textcon</a>
</section>
<div class="chain">
<a href="rm-class-text_panel_frontend.html">text_panel_frontend</a>
<a href="rm-class-time-server.html">time-server</a>
</div>
<!doctype html>
<head>
<meta charset="utf-8">
<title>8.4 Test Framework Libraries Available in Simics Tests</title>
<link rel="stylesheet" href="simics.css">
<script>function postUrl() {
    window.parent.postMessage({ content_url: window.location.href }, "*");
}
if (window.parent != null && window.parent != window) {
    postUrl();
    window.addEventListener("hashchange", function () {
        postUrl();
    });
} else {
    // Check if we are part of a Simics doc site and redirect if we are
    fetch("../simics-doc-site-marker", { method: "HEAD" }).then(response => {
        if (response.ok) {
            window.location = "..#" + window.location.href;
        } else {
            console.info("Not part of a Simics documentation site");
        }
    }).catch(error => {
        console.warn("Failed to check if this is a Simics documentation site:",
            error);
    });
}</script>
</head>
<div class="chain">
<a href="pymods-outside.html">8.3 Test Framework Libraries Available Outside Simics</a>
</div>
<div class="path">
<a href="index.html">Simics Reference Manual</a>
&nbsp;/&nbsp;
<a href="test-framework.html">8 Test Framework</a>
&nbsp;/&nbsp;</div>
<h1>8.4 Test Framework Libraries Available in Simics Tests</h1>
<article class="not-numbered">
<h2 id="reverse_execution"><a href="#reverse_execution">reverse_execution</a></h2>
<p>
</p><p>Library for running reverse execution tests on an entire system.</p>
<p>The tests checks the state of processors and images when using reverse
execution.</p>
<p></p>
<h3 id="reverse_execution_test"><a href="#reverse_execution_test">reverse_execution_test</a></h3>
<article class="doc-item not-in-toc not-numbered">
<h4 id="superclasses"><a href="#superclasses">SUPERCLASSES</a></h4>
<p>builtins.object</p>
<h4 id="constructor"><a href="#constructor">CONSTRUCTOR</a></h4>
<pre><code>reverse_execution_test(start = 0, totlen = 100000000, n1 = 10, n2 = 20, len1 = 1000000, seed = 1091, debug = False, trace_pc = False)
</code></pre>
<h4 id="description"><a href="#description">DESCRIPTION</a></h4>
<p>
</p><p>Runs reverse execution tests.</p>
<p>The test sets up a number of points within an interval and runs several
reverse execution checks in an interval after each point.</p>
<p>Constructor arguments (all have default values): </p>
<div class="dl">
<ul>
<li><span class="term" id="dt:start">start</span><br>
the start of the interval to test within </li>
<li><span class="term" id="dt:totlen">totlen</span><br>
the length of the interval to test within </li>
<li><span class="term" id="dt:n1">n1</span><br>
number of checks to run at each test point </li>
<li><span class="term" id="dt:n2">n2</span><br>
number of points to run checks at </li>
<li><span class="term" id="dt:len1">len1</span><br>
length of the interval to run checks past each test point </li>
<li><span class="term" id="dt:seed">seed</span><br>
random number seed to use for generating test points and checks </li>
<li><span class="term" id="dt:debug">debug</span><br>
set to True for more debug messages </li>
<li><span class="term" id="dt:trace_pc">trace_pc</span><br>
set to True to get the program counter printed at each test </li>
</ul>
</div>
<p></p>
</article>
<h4 id="print_parameters"><a href="#print_parameters">print_parameters</a></h4>
<article class="doc-item not-in-toc not-numbered">
<h5 id="synopsis"><a href="#synopsis">SYNOPSIS</a></h5>
<pre><code>obj.print_parameters()
</code></pre>
<h5 id="description-2"><a href="#description-2">DESCRIPTION</a></h5>
<p>
</p><p>Prints the parameters used by this object.</p>
<p></p>
</article>
<h4 id="runtest"><a href="#runtest">runtest</a></h4>
<article class="doc-item not-in-toc not-numbered">
<h5 id="synopsis-2"><a href="#synopsis-2">SYNOPSIS</a></h5>
<pre><code>obj.runtest(points = None, randvals = None, cpu = None)
</code></pre>
<h5 id="description-3"><a href="#description-3">DESCRIPTION</a></h5>
<p>
</p><p>Run reverse execution checks.</p>
<p>Arguments: </p>
<div class="dl">
<ul>
<li><span class="term" id="dt:points">points</span><br>
points to run the checks at, optional, defaults to points generated
based on the parameters provided when constructing this object </li>
<li><span class="term" id="dt:randvals">randvals</span><br>
offsets past each point to check state at, optional, defaults to
offsets generated based on the parameters provided when constructing
this object </li>
<li><span class="term" id="dt:cpu">cpu</span><br>
the processor to use as a time base, optional, defaults to the
current processor </li>
</ul>
</div>
<p></p>
</article>
<h4 id="testone"><a href="#testone">testone</a></h4>
<article class="doc-item not-in-toc not-numbered">
<h5 id="synopsis-3"><a href="#synopsis-3">SYNOPSIS</a></h5>
<pre><code>obj.testone(offstable, cpu = None)
</code></pre>
<h5 id="description-4"><a href="#description-4">DESCRIPTION</a></h5>
<p>
</p><p>Run reverse execution checks for the point the cpu is currently at.</p>
<p>Arguments: </p>
<div class="dl">
<ul>
<li><span class="term" id="dt:offstable">offstable</span><br>
offsets from the current cycle to check the state of the system at</li>
<li><span class="term" id="dt:cpu-2">cpu</span><br>
the processor to use as a time base, optional, defaults to the
current processor </li>
</ul>
</div>
<p></p>
</article>
<h2 id="info_status"><a href="#info_status">info_status</a></h2>
<p>
</p><p>Library for checking if classes has info and status commands.</p>
<p></p>
<h3 id="report_info_status_errors"><a href="#report_info_status_errors">report_info_status_errors</a></h3>
<article class="doc-item not-in-toc not-numbered">
<h4 id="synopsis-4"><a href="#synopsis-4">SYNOPSIS</a></h4>
<pre><code>report_info_status_errors(missing_info, missing_status, unexpected_info, unexpected_status)
</code></pre>
<h4 id="description-5"><a href="#description-5">DESCRIPTION</a></h4>
<p>
</p><p>Prints its input lists and quits Simics with an error.</p>
<p>First each provided list is printed in a human readable manner and then the
function quits Simics with the result 1, which will be detected by the test
system as a test failure.</p>
<p>Arguments: </p>
<div class="dl">
<ul>
<li><span class="term" id="dt:missing_info">missing_info</span><br>
a list of classes which do not have <code>info</code> commands</li>
<li><span class="term" id="dt:missing_status">missing_status</span><br>
a list of classes which do not have <code>status</code> commands</li>
<li><span class="term" id="dt:unexpected_info">unexpected_info</span><br>
a list of classes which have <code>info</code> commands, but which
were on the info command passlist</li>
<li><span class="term" id="dt:unexpected_status">unexpected_status</span><br>
a list of classes which have <code>status</code> commands, but which
were on the status command passlist</li>
</ul>
</div>
<p></p>
</article>
<h3 id="check_for_info_status"><a href="#check_for_info_status">check_for_info_status</a></h3>
<article class="doc-item not-in-toc not-numbered">
<h4 id="synopsis-5"><a href="#synopsis-5">SYNOPSIS</a></h4>
<pre><code>check_for_info_status(modules, info_passlist = [], status_passlist = [], report_errors = \&lt;function report_info_status_errors\&gt;)
</code></pre>
<h4 id="description-6"><a href="#description-6">DESCRIPTION</a></h4>
<p>
</p><p>Check that the classes in a list of modules have info and status commands.</p>
<p>Classes are Simics configuration classes, not python classes. The function
checks all the classes in the named modules to see if they have <code>info</code> and
<code>status</code> commands. If any such command is missing it will be detected as an
error, but you can provide passlists. If a class is passlisted and still has
the command it will be detected as an error. If any errors are detected the
function calls a function to report this. By default the
<code>report_info_status_error</code> is called, but you can override this with the
<code>report_errors</code> argument.</p>
<p>The modules named in modules will be loaded into Simics as a side effect of
running this test.</p>
<p>Arguments:</p>
<div class="dl">
<ul>
<li><span class="term" id="dt:modules">modules</span><br>
the modules whose classes to test</li>
<li><span class="term" id="dt:info_passlist">info_passlist</span><br>
the list of classes which should not have info commands</li>
<li><span class="term" id="dt:status_passlist">status_passlist</span><br>
the list of classes which should not have status commands</li>
<li><span class="term" id="dt:report_errors">report_errors</span><br>
the function to call to report errors</li>
</ul>
</div>
<p></p>
</article>
</article>

<div class="chain">
<a href="pymods-outside.html">8.3 Test Framework Libraries Available Outside Simics</a>
</div>